build_environment: Ubuntu 12.04

language: java

jdk:
    - oraclejdk7

install:
    - sudo apt-get update
    - sudo apt-get install -y lib32stdc++6 lib32z1 expect
    - wget http://dl.google.com/android/android-sdk_r23.0.2-linux.tgz
    - tar zxvf android-sdk_r23.0.2-linux.tgz -C .
    - export ANDROID_HOME="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"/android-sdk-linux
    - expect -c '
      set timeout -1;
      spawn android-sdk-linux/tools/android update sdk --no-ui;
      expect {
        "Do you accept the license" { exp_send "y\r" ; exp_continue }
        eof
      }
      '
    - ./gradlew assemble --stacktrace
    - echo "sdk.dir=$ANDROID_HOME" > local.properties

script:
    - ./gradlew check --stackrace
